import{C,m as p,c as n,a as y,u as o,w as b,F as j,o as l,d as P,b as t,t as i,i as c,g as S,h as x,k as g,e as a,n as m,P as V}from"./app-JST4J_vd.js";import{_ as B}from"./AuthenticatedLayout-DgrmEhAg.js";const F={class:"py-12"},N={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},T={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},U={class:"md:col-span-1"},q={class:"bg-white overflow-hidden shadow-sm rounded-xl"},R=["src","alt"],z={class:"p-6"},L={class:"text-xl font-semibold text-gray-900"},$={class:"text-sm text-gray-600"},E={class:"mt-4 space-y-2"},G={class:"flex items-center text-sm text-gray-600"},I={class:"flex items-center text-sm text-gray-600"},O={class:"flex items-center text-sm text-gray-600"},A={class:"mt-6 bg-white overflow-hidden shadow-sm rounded-xl p-6"},J={class:"space-y-2"},Y={class:"flex justify-between text-sm"},H={class:"font-medium"},K={class:"flex justify-between text-sm"},Q={class:"font-medium"},W={class:"flex justify-between text-sm"},X={class:"font-medium"},Z={class:"flex justify-between text-sm"},tt={class:"font-medium"},et={class:"pt-4 border-t"},st={class:"flex justify-between"},ot={class:"text-lg font-semibold text-indigo-600"},it={class:"md:col-span-2"},rt={class:"bg-white overflow-hidden shadow-sm rounded-xl"},dt={class:"p-6"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},lt={key:0,class:"mt-1 text-sm text-red-600"},at={key:0,class:"mt-1 text-sm text-red-600"},mt={key:0,class:"mt-1 text-sm text-red-600"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ct=["min"],xt={key:0,class:"mt-1 text-sm text-red-600"},gt={key:0,class:"mt-1 text-sm text-red-600"},ft={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},pt={class:"space-y-1 text-center"},yt={key:0,class:"flex flex-col items-center"},bt={class:"flex text-sm text-gray-600"},vt={for:"license-upload",class:"relative cursor-pointer rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},ht={key:1,class:"flex flex-col items-center"},wt={class:"text-sm text-gray-900"},_t={key:0,class:"mt-1 text-sm text-red-600"},kt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Dt={class:"flex items-center"},Mt={class:"flex-shrink-0"},Ct={class:"ml-3"},jt={class:"flex items-center"},Pt={class:"flex-shrink-0"},St={class:"ml-3"},Vt={key:0,class:"mt-1 text-sm text-red-600"},Bt={class:"flex items-center justify-end space-x-4"},Ft=["disabled"],Nt={key:0,class:"fas fa-spinner fa-spin mr-2"},qt={__name:"Checkout",props:{car:{type:Object,required:!0}},setup(r){const v=r,s=C({name:"",phone:"",address:"",startDate:"",duration:1,paymentMethod:"cash",license:null,total:0}),_=new Date().toISOString().split("T")[0],f=p(()=>s.duration*v.car.price_per_day),h=p(()=>f.value*.1),w=p(()=>f.value+h.value),k=u=>{const e=u.target.files[0];if(e){if(e.size>10*1024*1024){s.errors.license="File size must be less than 10MB";return}s.license=e}},D=()=>{s.license=null},M=()=>{s.total=w.value,s.post(route("rentals.store",{car:v.car.id}),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{alert("Booking completed successfully!"),window.location=route("dashboard")},onError:u=>{console.error("Booking failed:",u)}})};return(u,e)=>(l(),n(j,null,[y(o(P),{title:"Checkout"}),y(B,null,{header:b(()=>e[7]||(e[7]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Complete Your Rental ",-1)])),default:b(()=>[t("div",F,[t("div",N,[t("div",T,[t("div",U,[t("div",q,[t("img",{src:r.car.image,alt:r.car.name,class:"w-full h-48 object-cover"},null,8,R),t("div",z,[t("h3",L,i(r.car.name),1),t("p",$,i(r.car.type)+" • "+i(r.car.transmission),1),t("div",E,[t("div",G,[e[8]||(e[8]=t("i",{class:"fas fa-car w-5"},null,-1)),c(" "+i(r.car.transmission),1)]),t("div",I,[e[9]||(e[9]=t("i",{class:"fas fa-gas-pump w-5"},null,-1)),c(" "+i(r.car.fuel_type),1)]),t("div",O,[e[10]||(e[10]=t("i",{class:"fas fa-money-bill w-5"},null,-1)),c(" ₱"+i(r.car.price_per_day)+"/day ",1)])])])]),t("div",A,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Price Summary",-1)),t("div",J,[t("div",Y,[e[11]||(e[11]=t("span",{class:"text-gray-600"},"Daily Rate",-1)),t("span",H,"₱"+i(r.car.price_per_day),1)]),t("div",K,[e[12]||(e[12]=t("span",{class:"text-gray-600"},"Duration",-1)),t("span",Q,i(o(s).duration)+" days",1)]),t("div",W,[e[13]||(e[13]=t("span",{class:"text-gray-600"},"Subtotal",-1)),t("span",X,"₱"+i(f.value),1)]),t("div",Z,[e[14]||(e[14]=t("span",{class:"text-gray-600"},"Tax (10%)",-1)),t("span",tt,"₱"+i(h.value),1)]),t("div",et,[t("div",st,[e[15]||(e[15]=t("span",{class:"text-lg font-semibold"},"Total",-1)),t("span",ot,"₱"+i(w.value),1)])])])])]),t("div",it,[t("div",rt,[t("div",dt,[e[33]||(e[33]=t("h3",{class:"text-lg font-medium text-gray-900"},"Rental Information",-1)),t("form",{onSubmit:S(M,["prevent"]),class:"mt-6 space-y-6"},[t("div",nt,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700"},"Full Name",-1)),x(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>o(s).name=d),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,o(s).name]]),o(s).errors.name?(l(),n("div",lt,i(o(s).errors.name),1)):a("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700"},"Phone Number",-1)),x(t("input",{type:"tel","onUpdate:modelValue":e[1]||(e[1]=d=>o(s).phone=d),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,o(s).phone]]),o(s).errors.phone?(l(),n("div",at,i(o(s).errors.phone),1)):a("",!0)])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700"},"Address",-1)),x(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=d=>o(s).address=d),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,o(s).address]]),o(s).errors.address?(l(),n("div",mt,i(o(s).errors.address),1)):a("",!0)]),t("div",ut,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=d=>o(s).startDate=d),min:o(_),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,8,ct),[[g,o(s).startDate]]),o(s).errors.startDate?(l(),n("div",xt,i(o(s).errors.startDate),1)):a("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700"},"Duration (Days)",-1)),x(t("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=d=>o(s).duration=d),min:"1",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,o(s).duration]]),o(s).errors.duration?(l(),n("div",gt,i(o(s).errors.duration),1)):a("",!0)])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700"},"Driver's License",-1)),t("div",ft,[t("div",pt,[o(s).license?(l(),n("div",ht,[e[26]||(e[26]=t("i",{class:"fas fa-file text-indigo-600 text-3xl mb-2"},null,-1)),t("p",wt,i(o(s).license.name),1),t("button",{type:"button",class:"mt-2 text-sm text-red-600 hover:text-red-800",onClick:D}," Remove file ")])):(l(),n("div",yt,[e[24]||(e[24]=t("i",{class:"fas fa-upload text-gray-400 text-3xl mb-4"},null,-1)),t("div",bt,[t("label",vt,[e[22]||(e[22]=t("span",null,"Upload a file",-1)),t("input",{id:"license-upload",name:"license-upload",type:"file",class:"sr-only",accept:".jpg,.jpeg,.png,.pdf",onChange:k},null,32)]),e[23]||(e[23]=t("p",{class:"pl-1"},"or drag and drop",-1))]),e[25]||(e[25]=t("p",{class:"text-xs text-gray-500"}," PNG, JPG, or PDF up to 10MB ",-1))]))])]),o(s).errors.license?(l(),n("div",_t,i(o(s).errors.license),1)):a("",!0)]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-4"},"Payment Method",-1)),t("div",kt,[t("div",{class:m(["relative border rounded-lg p-4 cursor-pointer",{"border-indigo-600 bg-indigo-50":o(s).paymentMethod==="card","border-gray-300 hover:border-indigo-500":o(s).paymentMethod!=="card"}]),onClick:e[5]||(e[5]=d=>o(s).paymentMethod="card")},[t("div",Dt,[t("div",Mt,[t("i",{class:m(["fas fa-credit-card text-xl",o(s).paymentMethod==="card"?"text-indigo-600":"text-gray-400"])},null,2)]),t("div",Ct,[t("h3",{class:m(["text-sm font-medium",o(s).paymentMethod==="card"?"text-indigo-900":"text-gray-900"])},"Credit/Debit Card",2),e[28]||(e[28]=t("p",{class:"text-xs text-gray-500"},"Pay with your card",-1))])])],2),t("div",{class:m(["relative border rounded-lg p-4 cursor-pointer",{"border-indigo-600 bg-indigo-50":o(s).paymentMethod==="cash","border-gray-300 hover:border-indigo-500":o(s).paymentMethod!=="cash"}]),onClick:e[6]||(e[6]=d=>o(s).paymentMethod="cash")},[t("div",jt,[t("div",Pt,[t("i",{class:m(["fas fa-money-bill text-xl",o(s).paymentMethod==="cash"?"text-indigo-600":"text-gray-400"])},null,2)]),t("div",St,[t("h3",{class:m(["text-sm font-medium",o(s).paymentMethod==="cash"?"text-indigo-900":"text-gray-900"])},"Cash on Pickup",2),e[29]||(e[29]=t("p",{class:"text-xs text-gray-500"},"Pay when you pick up the car",-1))])])],2)]),o(s).errors.paymentMethod?(l(),n("div",Vt,i(o(s).errors.paymentMethod),1)):a("",!0)]),t("div",Bt,[y(o(V),{href:u.route("cars.show",r.car.id),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:b(()=>e[31]||(e[31]=[c(" Cancel ")])),_:1},8,["href"]),t("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:o(s).processing},[o(s).processing?(l(),n("i",Nt)):a("",!0),e[32]||(e[32]=c(" Complete Booking "))],8,Ft)])],32)])])])])])])]),_:1})],64))}};export{qt as default};
